name: 'E2E Test'
description: 'Runs E2E Test'
inputs:
  asap-app-url:
    description: 'ASAP App Url'
    required: true
  environment-name:
    description: 'Environment name'
    required: true
runs:
  using: 'composite'
  steps:
    - name: Cache build output
      uses: actions/cache@v2
      id: restore-rebuild
      with:
        path: |
          .yarn/unplugged/
        key: rebuild-output-${{ inputs.environment-name }}-${{ github.sha }}
    - name: Install Playwright
      shell: bash
      run: |
        yarn workspace @asap-hub/e2e-tests run playwright install
    - name: Test
      shell: bash
      run: |
        yarn workspace @asap-hub/e2e-tests run playwright test
      env:
        ASAP_APP_URL: ${{ inputs.asap-app-url }}
