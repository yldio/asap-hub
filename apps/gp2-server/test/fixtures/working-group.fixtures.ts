import type { gp2 as gp2Contentful } from '@asap-hub/contentful';
import type { gp2 as gp2Model } from '@asap-hub/model';
import type { gp2 as gp2Squidex } from '@asap-hub/squidex';
import {
  FetchWorkingGroupQuery,
  FetchWorkingGroupsQuery,
  WorkingGroupsDataMembersRoleEnum,
  WorkingGroupsDataMilestonesStatusEnum,
  WorkingGroupsDataResourcesTypeEnum,
} from '../../src/autogenerated-gql/graphql';
import {
  GraphQLWorkingGroup,
  GraphQLWorkingGroupCalendar,
  GraphQLWorkingGroupMember,
  GraphQLWorkingGroupMilestone,
  GraphQLWorkingGroupResource,
} from '../../src/data-providers/working-group.data-provider';

export const getWorkingGroupDataObject =
  (): gp2Model.WorkingGroupDataObject => ({
    id: '11',
    title: 'a working group title',
    shortDescription: 'Short description',
    description: 'longer description',
    primaryEmail: 'primary.email@example.com',
    secondaryEmail: 'secondary.email@example.com',
    leadingMembers: 'Leading members',
    members: [
      {
        id: '32',
        userId: '11',
        firstName: 'Tony',
        lastName: 'Stark',
        role: 'Lead',
      },
    ],
    milestones: [
      {
        title: 'A working group milestone',
        status: 'Active',
      },
    ],
    resources: [
      {
        id: '27',
        type: 'Note',
        description: 'Working group resource description',
        title: 'Working group resource title',
      },
    ],
    calendar: {
      id: '42',
      name: 'working group calendar',
    },
  });

export const getWorkingGroupUpdateDataObject =
  (): gp2Model.WorkingGroupUpdateDataObject => ({
    resources: [
      {
        type: 'Note',
        description: 'Working group resource description',
        title: 'Working group resource title',
      },
    ],
    members: [
      {
        userId: '11',
        role: 'Lead',
      },
    ],
  });

export const getRestWorkingGroupUpdateData =
  (): gp2Squidex.InputWorkingGroup['data'] => ({
    resources: {
      iv: [
        {
          type: 'Note',
          description: 'Working group resource description',
          title: 'Working group resource title',
        },
      ],
    },
    members: {
      iv: [
        {
          role: 'Lead',
          user: ['11'],
        },
      ],
    },
  });

export const getListWorkingGroupDataObject =
  (): gp2Model.ListWorkingGroupResponse => ({
    total: 1,
    items: [getWorkingGroupDataObject()],
  });

export const getWorkingGroupResponse = (): gp2Model.WorkingGroupResponse =>
  getWorkingGroupDataObject();

export const getListWorkingGroupsResponse =
  (): gp2Model.ListWorkingGroupResponse => ({
    total: 1,
    items: [getWorkingGroupResponse()],
  });

export const getSquidexWorkingGroupsGraphqlResponse =
  (): FetchWorkingGroupsQuery => ({
    queryWorkingGroupsContentsWithTotal: {
      total: 1,
      items: [getGraphQLWorkingGroup()],
    },
  });

export const getSquidexWorkingGroupGraphqlResponse = (
  findWorkingGroupsContent = getGraphQLWorkingGroup(),
): FetchWorkingGroupQuery => ({
  findWorkingGroupsContent,
});

export const getGraphQLWorkingGroupMember = (): GraphQLWorkingGroupMember => ({
  role: WorkingGroupsDataMembersRoleEnum.Lead,
  user: [
    {
      id: '11',
      created: '2021-01-01T00:00:00Z',
      lastModified: '2021-01-01T00:00:00Z',
      version: 1,
      flatData: {
        firstName: 'Tony',
        lastName: 'Stark',
        avatar: null,
        onboarded: true,
      },
    },
  ],
});

export const getGraphQLWorkingGroupMilestone =
  (): GraphQLWorkingGroupMilestone => ({
    title: 'A working group milestone',
    status: WorkingGroupsDataMilestonesStatusEnum.Active,
    description: null,
    link: null,
  });

export const getGraphQLWorkingGroupResource =
  (): GraphQLWorkingGroupResource => ({
    type: WorkingGroupsDataResourcesTypeEnum.Note,
    title: 'Working group resource title',
    description: 'Working group resource description',
    externalLink: null,
  });

export const getGraphQLWorkingGroupCalendar =
  (): GraphQLWorkingGroupCalendar => ({
    id: '42',
    flatData: {
      name: 'working group calendar',
    },
  });
export const getGraphQLWorkingGroup = (): GraphQLWorkingGroup => ({
  id: '11',
  flatData: {
    title: 'a working group title',
    shortDescription: 'Short description',
    description: 'longer description',
    primaryEmail: 'primary.email@example.com',
    secondaryEmail: 'secondary.email@example.com',
    leadingMembers: 'Leading members',
    members: [getGraphQLWorkingGroupMember()],
    milestones: [getGraphQLWorkingGroupMilestone()],
    resources: [getGraphQLWorkingGroupResource()],
    calendars: [getGraphQLWorkingGroupCalendar()],
  },
});
export const getContentfulGraphqlWorkingGroupMembers = () => ({
  total: 1,
  items: [
    {
      sys: {
        id: '32',
      },
      role: 'Lead',
      user: {
        sys: {
          id: '11',
        },
        firstName: 'Tony',
        lastName: 'Stark',
        onboarded: true,
      },
    },
  ],
});
export const getContentfulGraphqlWorkingGroupMilestones = () => ({
  total: 1,
  items: [
    {
      sys: {
        id: '23',
      },
      status: 'Active',
      title: 'A working group milestone',
    },
  ],
});

export const getContentfulGraphqlWorkingGroupResources = () => ({
  total: 1,
  items: [
    {
      sys: {
        id: '27',
      },
      type: 'Note',
      title: 'Working group resource title',
      description: 'Working group resource description',
      externalLink: 'http://example/link',
    },
  ],
});
export const getContentfulGraphqlWorkingGroup = (
  props = {},
): NonNullable<
  NonNullable<gp2Contentful.FetchWorkingGroupByIdQuery['workingGroups']>
> => ({
  sys: {
    id: '11',
  },
  title: 'a working group title',
  shortDescription: 'Short description',
  description: 'longer description',
  primaryEmail: 'primary.email@example.com',
  secondaryEmail: 'secondary.email@example.com',
  leadingMembers: 'Leading members',
  membersCollection: { ...getContentfulGraphqlWorkingGroupMembers() },
  milestonesCollection: { ...getContentfulGraphqlWorkingGroupMilestones() },
  resourcesCollection: { ...getContentfulGraphqlWorkingGroupResources() },
  calendar: {
    sys: {
      id: '42',
    },
    name: 'working group calendar',
  },
  ...props,
});

export const getContentfulGraphqlWorkingGroupsResponse =
  (): gp2Contentful.FetchWorkingGroupsQuery => ({
    workingGroupsCollection: {
      total: 1,
      items: [getContentfulGraphqlWorkingGroup()],
    },
  });
